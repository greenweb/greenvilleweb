var oneApp=oneApp||{},$oneApp=$oneApp||jQuery(oneApp);!function(e,$,t,o,r){"use strict";o.HeroView=o.SectionView.extend({events:function(){return t.extend({},o.SectionView.prototype.events,{"click .ttfmake-add-block":"addBlock"})},addBlock:function(e,t){e.preventDefault();var r,i;r=new o.HeroBlockView({model:new o.HeroBlockModel({id:(new Date).getTime(),parentID:this.getParentID()})}),i=r.render().el,$(".ttfmake-hero-blocks-stage",this.$el).append(i),t||o.scrollToAddedView(r),o.initializeHeroBlocksColorPicker(r),o.addOrderValue(r.model.get("id"),$(".ttfmake-hero-block-order",$(r.$el).parents(".ttfmake-hero-blocks")))},getParentID:function(){var e=this.$el.attr("id"),t=e.replace("ttfmake-section-","");return parseInt(t,10)}}),o.initializeHeroBlocksSortables=function(e){var t;e=e||"",t=e.$el?$(".ttfmake-hero-blocks-stage",e.$el):$(".ttfmake-hero-blocks-stage"),t.sortable({handle:".ttfmake-sortable-handle",placeholder:"sortable-placeholder",forcePlaceholderSizeType:!0,distance:2,tolerance:"pointer",start:function(e,t){var o=$(t.item.get(0)),r=o.parents(".ttfmake-hero-blocks-stage");$(".sortable-placeholder",r).height(o.height())},stop:function(e,t){var r=$(t.item.get(0)),i=r.parents(".ttfmake-hero-blocks"),a=$(".ttfmake-hero-block-order",i);o.setOrder($(this).sortable("toArray",{attribute:"data-id"}),a)}})},o.initializeHeroBlocksColorPicker=function(e){var t;e=e||"",t=e.$el?$(".gw214-configuration-color-picker",e.$el):$(".gw214-configuration-color-picker"),t.wpColorPicker({hide:!1})},r.on("afterSectionViewAdded",function(e,t){"hero"===t.model.get("sectionType")&&($(".ttfmake-add-block",t.$el).trigger("click",{type:"pseudo"}),o.initializeHeroBlocksSortables(t))}),o.initHeroBlockViews=function(e){e=e||"";var t=""===e?$(".ttfmake-hero-block"):$(".ttfmake-hero-block",e);t.each(function(){var e=$(this),t=e.attr("id"),r=e.attr("data-id"),i=e.parents(".ttfmake-section"),a=i.attr("data-id"),l,n;l=new o.HeroBlockModel({id:r,parentID:a}),n=new o.HeroBlockView({model:l,el:$("#"+t),serverRendered:!0}),o.initializeHeroBlocksColorPicker(n)}),o.initializeHeroBlocksSortables()},o.initHeroBlockViews()}(window,jQuery,_,oneApp,$oneApp);
//# sourceMappingURL=./hero-min.js.map